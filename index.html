<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ZenoAI</title>
  <meta name="description" content="ZenoAI - Sohbet + 7. SÄ±nÄ±f + Genel Bilgi" />
  <style>
    :root{
      --bg:#0b0f19;
      --panel:#0f1626;
      --panel2:#0d1322;
      --card:#111a2e;
      --card2:#0f1a33;
      --text:#eaf0ff;
      --muted:#9aa7c1;
      --line:rgba(255,255,255,.08);
      --accent:#7c3aed;
      --accent2:#22c55e;
      --danger:#ef4444;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius:18px;
      --radius2:14px;
      --font: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 20% 5%, rgba(124,58,237,.25), transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, rgba(34,197,94,.18), transparent 60%),
                  radial-gradient(1000px 600px at 50% 90%, rgba(59,130,246,.12), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:var(--font);
      min-height:100vh;
    }
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:18px 14px 26px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      border:1px solid var(--line);
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      position:sticky;
      top:10px;
      backdrop-filter: blur(10px);
      z-index:10;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 220px;
    }
    .logo{
      width:40px; height:40px; border-radius:14px;
      display:grid; place-items:center;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.25), rgba(255,255,255,0)),
                  linear-gradient(135deg, rgba(124,58,237,.9), rgba(59,130,246,.7));
      border:1px solid rgba(255,255,255,.12);
      position:relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,.25), transparent);
      transform: rotate(25deg);
      animation: shine 2.8s linear infinite;
    }
    @keyframes shine{
      0%{transform:translateX(-40%) rotate(25deg)}
      100%{transform:translateX(40%) rotate(25deg)}
    }
    .logo span{font-weight:900; letter-spacing:.5px}
    .titlebox{display:flex; flex-direction:column; line-height:1.05}
    .title{
      font-size:18px; font-weight:900; letter-spacing:.3px;
      display:flex; align-items:baseline; gap:8px;
    }
    .title .ai{
      font-size:12px;
      padding:3px 8px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      color:var(--muted);
    }
    .subtitle{font-size:12px; color:var(--muted)}
    .nav{
      display:flex; align-items:center; gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
      transition:.15s transform, .15s background, .15s border;
      user-select:none;
      display:inline-flex; gap:8px; align-items:center;
    }
    .pill:hover{transform:translateY(-1px); background:rgba(255,255,255,.05); border-color:rgba(255,255,255,.16)}
    .pill.active{
      background:rgba(124,58,237,.22);
      border-color:rgba(124,58,237,.45);
    }
    .grid{
      display:grid;
      grid-template-columns: 1.45fr .9fr;
      gap:14px;
      margin-top:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr; }
      .brand{min-width:auto}
    }
    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panelHead{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      background:rgba(0,0,0,.18);
      border-bottom:1px solid var(--line);
    }
    .panelHead .hint{
      font-size:12px; color:var(--muted)
    }
    .chat{
      height: 520px;
      overflow:auto;
      padding:14px;
      background: radial-gradient(800px 400px at 30% 0%, rgba(124,58,237,.08), transparent 55%),
                  radial-gradient(700px 350px at 80% 10%, rgba(34,197,94,.06), transparent 55%),
                  var(--panel2);
    }
    .msg{
      max-width: 90%;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
      margin:8px 0;
      white-space:pre-wrap;
      word-break:break-word;
      line-height:1.35;
    }
    .msg .meta{font-size:11px; color:var(--muted); margin-top:6px}
    .msg.user{
      margin-left:auto;
      background:rgba(124,58,237,.18);
      border-color:rgba(124,58,237,.35);
    }
    .msg.bot{
      margin-right:auto;
      background:rgba(255,255,255,.04);
    }
    .composer{
      display:flex;
      gap:10px;
      padding:12px;
      border-top:1px solid var(--line);
      background:rgba(0,0,0,.16);
      align-items:flex-end;
    }
    textarea{
      width:100%;
      min-height:42px;
      max-height:120px;
      resize:vertical;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.03);
      color:var(--text);
      outline:none;
      font-family:var(--font);
      font-size:14px;
    }
    .btn{
      border:none;
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(59,130,246,.75));
      color:white;
      padding:10px 14px;
      border-radius:14px;
      cursor:pointer;
      font-weight:700;
      transition:.15s transform, .15s opacity;
      white-space:nowrap;
      height:42px;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn.secondary{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text);
      font-weight:600;
    }

    .side{
      padding:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    }
    .card{
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      padding:12px;
      margin-bottom:12px;
    }
    .card h3{
      margin:0 0 8px;
      font-size:13px;
      color:var(--muted);
      letter-spacing:.2px;
      font-weight:700;
    }
    .quick{
      display:flex; flex-wrap:wrap; gap:8px;
    }
    .chip{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.09);
      padding:7px 10px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
      transition:.15s transform, .15s background;
    }
    .chip:hover{transform:translateY(-1px); background:rgba(255,255,255,.06)}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      color:var(--muted);
      line-height:1.4;
    }
    .small{
      font-size:12px; color:var(--muted)
    }
    .divider{height:1px; background:var(--line); margin:10px 0}
    .badge{
      display:inline-flex; gap:6px; align-items:center;
      font-size:12px; color:var(--muted);
      border:1px solid rgba(255,255,255,.10);
      padding:6px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.03);
    }
    .dot{width:8px; height:8px; border-radius:999px; background:var(--accent2)}
    .typing{
      display:inline-flex; gap:6px; align-items:center;
      font-size:12px; color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      margin:6px 0 0;
    }
    .bub{width:6px; height:6px; border-radius:999px; background:rgba(255,255,255,.45); animation: pop 1.1s infinite}
    .bub:nth-child(2){animation-delay:.15s}
    .bub:nth-child(3){animation-delay:.3s}
    @keyframes pop{
      0%,100%{transform:translateY(0); opacity:.5}
      50%{transform:translateY(-3px); opacity:1}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-label="ZenoAI logo"><span>Z</span></div>
        <div class="titlebox">
          <div class="title">
            <span id="brandTitle">ZenoAI</span>
            <span class="ai">Sohbet + 7. SÄ±nÄ±f</span>
          </div>
          <div class="subtitle" id="subtitle">HÄ±zlÄ± cevap â€¢ konu anlatÄ±mÄ± â€¢ mini test</div>
        </div>
      </div>

      <div class="nav">
        <div class="pill active" data-tab="chat">ğŸ’¬ Sohbet</div>
        <div class="pill" data-tab="ders">ğŸ“š 7. SÄ±nÄ±f</div>
        <div class="pill" data-tab="tarih">ğŸ›ï¸ Tarih</div>
        <div class="pill" data-tab="ayar">âš™ï¸ Ayar</div>
      </div>
    </div>

    <div class="grid">
      <!-- MAIN -->
      <div class="panel">
        <div class="panelHead">
          <div class="badge"><span class="dot"></span> <span id="modeBadge">Mod: Sohbet</span></div>
          <div class="hint" id="hintText">Ã–rn: â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€ â€¢ â€œtest: elektrik devreleriâ€ â€¢ â€œ12 bÃ¶lÃ¼ 3â€</div>
        </div>

        <div id="chat" class="chat" aria-live="polite"></div>

        <div class="composer">
          <textarea id="input" placeholder='Bir ÅŸey yaz... (Ã¶rn: "Ä°stanbulâ€™u kim fethetti?" / "Konu anlat: HÃ¼cre" / "teÅŸekkÃ¼rler")'></textarea>
          <button class="btn" id="sendBtn">GÃ¶nder</button>
        </div>
      </div>

      <!-- SIDE -->
      <div class="panel side">
        <div class="card">
          <h3>HÄ±zlÄ± Denemeler</h3>
          <div class="quick" id="quickChips"></div>
          <div class="divider"></div>
          <div class="kbd">
            <div><b>Komutlar</b></div>
            <div>â€¢ <b>Benim adÄ±m</b> ... (isim hatÄ±rlar)</div>
            <div>â€¢ <b>Konu anlat:</b> ...</div>
            <div>â€¢ <b>test:</b> ...</div>
            <div>â€¢ <b>7. sÄ±nÄ±f konular</b></div>
          </div>
        </div>

        <div class="card">
          <h3>MenÃ¼</h3>
          <div class="small">
            Ãœstteki menÃ¼den mod deÄŸiÅŸtir. ZenoAI, soruyu algÄ±layÄ±p en uygun ÅŸekilde cevaplar.
          </div>
        </div>

        <div class="card">
          <h3>Not</h3>
          <div class="small">
            Bu sÃ¼rÃ¼m â€œhazÄ±r bilgi havuzu + kurallarâ€ ile Ã§alÄ±ÅŸÄ±r. Daha gerÃ§ek AI iÃ§in API eklenebilir.
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* =========================
   ZenoAI - Tek Dosya
   (HazÄ±r bilgi + kurallar)
========================= */

const state = {
  tab: "chat",
  userName: "",
  testMode: false,
  testTopic: "",
};

const $chat = document.getElementById("chat");
const $input = document.getElementById("input");
const $sendBtn = document.getElementById("sendBtn");
const $modeBadge = document.getElementById("modeBadge");
const $hintText = document.getElementById("hintText");
const $subtitle = document.getElementById("subtitle");
const $quick = document.getElementById("quickChips");

const quickPrompts = [
  "Benim adÄ±m Mehmet Emir",
  "7. sÄ±nÄ±f konular",
  "Konu anlat: KarÄ±ÅŸÄ±mlar",
  "Konu anlat: Elektrik Devreleri",
  "test: karÄ±ÅŸÄ±mlar",
  "12 bÃ¶lÃ¼ 3",
  "OsmanlÄ±nÄ±n 2. padiÅŸahÄ± kim?",
  "Ä°stanbulâ€™u hangi padiÅŸah fethetti?",
  "Cumhuriyet ne zaman ilan edildi?",
  "teÅŸekkÃ¼rler",
];

function nowTime(){
  const d = new Date();
  return d.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});
}

function addMsg(role, text){
  const div = document.createElement("div");
  div.className = "msg " + (role === "user" ? "user":"bot");
  div.innerHTML = `${escapeHtml(text)}<div class="meta">${role==="user" ? (state.userName || "Sen") : "ZenoAI"} â€¢ ${nowTime()}</div>`;
  $chat.appendChild(div);
  $chat.scrollTop = $chat.scrollHeight;
}

function escapeHtml(str){
  return (str+"")
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;");
}

function showTyping(){
  const t = document.createElement("div");
  t.className="typing";
  t.id="typing";
  t.innerHTML = `<span class="bub"></span><span class="bub"></span><span class="bub"></span> dÃ¼ÅŸÃ¼nÃ¼yorum...`;
  $chat.appendChild(t);
  $chat.scrollTop = $chat.scrollHeight;
}
function hideTyping(){
  const t = document.getElementById("typing");
  if(t) t.remove();
}

/* ---------- Bilgi Havuzu ---------- */

// GÃ¼nlÃ¼k basit sorular
const dailyQA = [
  { keys:["nasÄ±lsÄ±n","naber","ne haber"], answer:(q)=> `Ä°yiyim${state.userName? " "+state.userName:""} ğŸ˜„ Sen nasÄ±lsÄ±n?` },
  { keys:["kaÃ§ yaÅŸÄ±ndasÄ±n","yaÅŸÄ±n"], answer:()=> "Ben bir yapay zekayÄ±m ğŸ™‚ YaÅŸÄ±m yok ama her gÃ¼n daha iyi oluyorum." },
  { keys:["saat kaÃ§","kaÃ§ta"], answer:()=> "Åu anki saat: " + nowTime() },
  { keys:["teÅŸekkÃ¼r","saÄŸol","saÄŸ ol","eyvallah"], answer:()=> "Rica ederim her zaman yanÄ±ndayÄ±m. ğŸ™Œ" },
  { keys:["selam","merhaba","sa"], answer:()=> `Selam! Ben ZenoAI ğŸ¤ Ä°stersen â€œBenim adÄ±m ...â€ yaz.` },
];

// OsmanlÄ± padiÅŸahlarÄ± (kÄ±sa demo; istersen geniÅŸletiriz)
const ottoman = [
  { n:1, name:"Osman Gazi" },
  { n:2, name:"Orhan Gazi" },
  { n:3, name:"I. Murad (HÃ¼davendigÃ¢r)" },
  { n:4, name:"YÄ±ldÄ±rÄ±m Bayezid" },
  { n:5, name:"I. Mehmed (Ã‡elebi)" },
  { n:6, name:"II. Murad" },
  { n:7, name:"Fatih Sultan Mehmed" },
];

// Cumhuriyet bilgileri
const republicFacts = [
  { keys:["cumhuriyet ne zaman","cumhuriyet ilan"], answer:()=> "TÃ¼rkiye Cumhuriyeti 29 Ekim 1923â€™te ilan edildi." },
  { keys:["tbmm ne zaman","meclis ne zaman aÃ§Ä±ldÄ±"], answer:()=> "TBMM 23 Nisan 1920â€™de aÃ§Ä±ldÄ±." },
];

// 7. sÄ±nÄ±f konu baÅŸlÄ±klarÄ± (Ã¶zet liste)
const grade7 = {
  "Matematik": [
    "Tam sayÄ±lar ve rasyonel sayÄ±lar",
    "Oran-orantÄ±, yÃ¼zde",
    "Cebirsel ifadeler",
    "EÅŸitlik ve denklem",
    "DoÄŸrular-aÃ§Ä±lar",
    "Ã‡okgenler",
    "Ã‡ember ve daire",
    "Veri analizi"
  ],
  "Fen Bilimleri": [
    "HÃ¼cre ve bÃ¶lÃ¼nmeler",
    "Kuvvet ve enerji",
    "Saf maddeler ve karÄ±ÅŸÄ±mlar",
    "IÅŸÄ±ÄŸÄ±n madde ile etkileÅŸimi",
    "Elektrik devreleri"
  ],
  "TÃ¼rkÃ§e": [
    "SÃ¶zcÃ¼kte anlam",
    "CÃ¼mlede anlam",
    "Paragraf",
    "Fiilimsiler",
    "YazÄ±m kurallarÄ± ve noktalama"
  ],
  "Sosyal Bilgiler": [
    "Ä°letiÅŸim ve insan iliÅŸkileri",
    "Ãœretim, daÄŸÄ±tÄ±m ve tÃ¼ketim",
    "TÃ¼rk tarihinde yolculuk",
    "Demokrasinin serÃ¼veni"
  ],
  "Din KÃ¼ltÃ¼rÃ¼": [
    "Ä°badet ve dua",
    "Ahlak",
    "Peygamberlerin Ã¶rnekliÄŸi"
  ],
  "Ä°ngilizce": [
    "Daily routines",
    "Preferences",
    "Descriptions",
    "Simple questions & answers"
  ]
};

// Konu anlatÄ±mÄ± mini metinleri (Ã¶rnek)
const topicExplain = {
  "karÄ±ÅŸÄ±mlar": `KarÄ±ÅŸÄ±mlar, en az iki maddenin kimyasal tepkime olmadan bir araya gelmesiyle oluÅŸur.\nâ€¢ Homojen: Her yerde aynÄ± (tuzlu su)\nâ€¢ Heterojen: Her yerde aynÄ± deÄŸil (kumlu su)\nAyÄ±rma yÃ¶ntemleri: sÃ¼zme, eleme, buharlaÅŸtÄ±rma, mÄ±knatÄ±sla ayÄ±rma, ayÄ±rma hunisi.`,
  "elektrik devreleri": `Basit elektrik devresi: pil (Ã¼reteÃ§) + ampul (alÄ±cÄ±) + anahtar + baÄŸlantÄ± kablosu.\nâ€¢ Seri devre: Ampuller artarsa parlaklÄ±k azalÄ±r.\nâ€¢ Paralel devre: Ampuller birbirinden baÄŸÄ±msÄ±z yanar.\nAnahtar aÃ§Ä±kken devre tamamlanmaz, akÄ±m geÃ§mez.`,
  "ibadet ve dua": `Ä°badet: Allahâ€™a kulluk etmek iÃ§in yapÄ±lan davranÄ±ÅŸlar (namaz, oruÃ§, zekat vb.).\nDua: Allahâ€™tan istemek, ÅŸÃ¼kretmek ve yardÄ±m dilemek.\nÄ°badet ve dua insanÄ±n hem manevi hem de ahlaki geliÅŸimine katkÄ± saÄŸlar.`
};

// Mini test sorularÄ± (Ã¶rnek)
const miniTests = {
  "karÄ±ÅŸÄ±mlar": [
    {q:"Tuzlu su hangi tÃ¼r karÄ±ÅŸÄ±mdÄ±r?", a:"Homojen karÄ±ÅŸÄ±m."},
    {q:"Kumlu suyu ayÄ±rmak iÃ§in hangi yÃ¶ntem kullanÄ±lÄ±r?", a:"SÃ¼zme (filtreleme)."},
    {q:"Demir tozu ve kum karÄ±ÅŸÄ±mÄ± nasÄ±l ayrÄ±lÄ±r?", a:"MÄ±knatÄ±sla ayÄ±rma."},
  ],
  "elektrik devreleri": [
    {q:"Anahtar aÃ§Ä±kken akÄ±m geÃ§er mi?", a:"HayÄ±r, devre tamamlanmaz."},
    {q:"Seri devrede ampul sayÄ±sÄ± artarsa parlaklÄ±k ne olur?", a:"AzalÄ±r."},
    {q:"Paralel devrede bir ampul patlarsa diÄŸerleri yanar mÄ±?", a:"Evet, yanar."},
  ]
};

/* ---------- YorumlayÄ±cÄ± ---------- */

function normalize(s){
  return (s||"")
    .toLowerCase()
    .replaceAll("â€™","'")
    .trim();
}

function answerFor(userText){
  const text = normalize(userText);

  // isim hatÄ±rlama
  if(text.startsWith("benim adÄ±m")){
    const name = userText.split(" ").slice(2).join(" ").trim();
    if(name){
      state.userName = name;
      return `Tamam ${state.userName}! Ä°smini hatÄ±rlayacaÄŸÄ±m. âœ…\nÄ°stersen soru sor veya â€œ7. sÄ±nÄ±f konularâ€ yaz.`;
    }
    return "Ä°smini ÅŸÃ¶yle yaz: â€œBenim adÄ±m Mehmetâ€";
  }

  // test modu
  if(text.startsWith("test:")){
    const topic = normalize(userText.split(":").slice(1).join(":")).trim();
    if(!topic) return "Test iÃ§in Ã¶rnek: â€œtest: karÄ±ÅŸÄ±mlarâ€";
    state.testMode = true;
    state.testTopic = topic;
    const t = miniTests[topic];
    if(!t) return `Bu konuda test hazÄ±r deÄŸil: â€œ${topic}â€.\nÃ–rnek: test: karÄ±ÅŸÄ±mlar / test: elektrik devreleri`;
    return `Mini test baÅŸladÄ± âœ…\n1) ${t[0].q}\n(CevabÄ±nÄ± yaz, ben kontrol edeyim.)`;
  }

  // test cevap kontrol
  if(state.testMode){
    const t = miniTests[state.testTopic];
    if(!t){ state.testMode=false; return "Test modu kapandÄ±."; }

    // basit kontrol: kullanÄ±cÄ± bir ÅŸey yazdÄ±ysa bir sonraki soruya geÃ§
    // (burayÄ± istersen â€œdoÄŸru-yanlÄ±ÅŸâ€ daha akÄ±llÄ± yaparÄ±z)
    const idx = window.__testIndex ?? 0;
    const correct = t[idx].a;
    const nextIdx = idx + 1;

    window.__testIndex = nextIdx;

    if(nextIdx >= t.length){
      state.testMode = false;
      window.__testIndex = 0;
      return `CevabÄ±n iÃ§in teÅŸekkÃ¼rler âœ…\nDoÄŸru cevap: ${correct}\nTest bitti. Ä°stersen baÅŸka test: â€œtest: elektrik devreleriâ€`;
    }
    return `DoÄŸru cevap (Ã¶rnek): ${correct}\n\n${nextIdx+1}) ${t[nextIdx].q}`;
  }

  // 7. sÄ±nÄ±f konular listesi
  if(text.includes("7. sÄ±nÄ±f") && (text.includes("konu") || text.includes("konular"))){
    let out = "ğŸ“š 7. SÄ±nÄ±f Konular (Ã¶zet)\n";
    for(const [ders, list] of Object.entries(grade7)){
      out += `\nâ€¢ ${ders}\n  - ${list.join("\n  - ")}\n`;
    }
    out += `\nÄ°stersen â€œKonu anlat: ...â€ yaz. Ã–rn: â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€`;
    return out;
  }

  // konu anlat
  if(text.startsWith("konu anlat:")){
    const topic = normalize(userText.split(":").slice(1).join(":")).trim();
    if(!topic) return "Ã–rnek: â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€";
    const found = topicExplain[topic];
    if(found) return `ğŸ“Œ Konu AnlatÄ±mÄ±: ${topic.toUpperCase()}\n\n${found}`;
    return `Bu konuda kÄ±sa anlatÄ±m hazÄ±r deÄŸil: â€œ${topic}â€.\nÄ°stersen konunun adÄ±nÄ± daha net yaz veya â€œ7. sÄ±nÄ±f konularâ€ de.`;
  }

  // basit matematik: bÃ¶lme / Ã§arpma / toplama / Ã§Ä±karma (Ã§ok basit)
  // Ã¶rn: "12 bÃ¶lÃ¼ 3"
  const bolu = text.match(/^(\d+)\s*(bÃ¶lÃ¼|bolu|\/)\s*(\d+)$/);
  if(bolu){
    const a = Number(bolu[1]);
    const b = Number(bolu[3]);
    if(b === 0) return "0â€™a bÃ¶lme tanÄ±msÄ±zdÄ±r.";
    return `${a} Ã· ${b} = ${a / b}`;
  }

  // OsmanlÄ± padiÅŸah sorularÄ± (kaÃ§Ä±ncÄ± / kim)
  if(text.includes("osmanlÄ±") && (text.includes("padiÅŸah") || text.includes("padisah"))){
    const numMatch = text.match(/(\d+)\.?/);
    if(numMatch && text.includes("padiÅŸah") && (text.includes("kim") || text.includes("kimdir"))){
      const n = Number(numMatch[1]);
      const found = ottoman.find(x=>x.n===n);
      if(found) return `OsmanlÄ±'nÄ±n ${n}. padiÅŸahÄ±: ${found.name}`;
      return `Åu an listemde ilk ${ottoman.length} padiÅŸah var. Ä°stersen ben listeyi bÃ¼yÃ¼teyim.`;
    }
    if(text.includes("istanbul") && (text.includes("fetih") || text.includes("fethett") || text.includes("kim fethetti"))){
      return "Ä°stanbulâ€™u 1453â€™te Fatih Sultan Mehmed fethetti.";
    }
  }

  // Cumhuriyet
  for(const r of republicFacts){
    if(r.keys.some(k=>text.includes(k))) return r.answer(text);
  }

  // GÃ¼nlÃ¼k sorular
  for(const d of dailyQA){
    if(d.keys.some(k=>text.includes(k))) return d.answer(text);
  }

  // Fallback
  return `Bunu daha iyi cevaplayabilmem iÃ§in biraz daha net yazar mÄ±sÄ±n?\nÃ–rn:\n- â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€\n- â€œtest: elektrik devreleriâ€\n- â€œCumhuriyet ne zaman ilan edildi?â€`;
}

/* ---------- UI / MenÃ¼ ---------- */
document.querySelectorAll(".pill").forEach(p=>{
  p.addEventListener("click", ()=>{
    document.querySelectorAll(".pill").forEach(x=>x.classList.remove("active"));
    p.classList.add("active");
    state.tab = p.dataset.tab;
    applyTab();
  });
});

function applyTab(){
  if(state.tab==="chat"){
    $modeBadge.textContent = "Mod: Sohbet";
    $hintText.textContent = 'Ã–rn: â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€ â€¢ â€œtest: elektrik devreleriâ€ â€¢ â€œ12 bÃ¶lÃ¼ 3â€';
    $subtitle.textContent = "HÄ±zlÄ± cevap â€¢ konu anlatÄ±mÄ± â€¢ mini test";
  } else if(state.tab==="ders"){
    $modeBadge.textContent = "Mod: 7. SÄ±nÄ±f";
    $hintText.textContent = 'Ã–rn: â€œ7. sÄ±nÄ±f konularâ€ â€¢ â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€ â€¢ â€œtest: karÄ±ÅŸÄ±mlarâ€';
    $subtitle.textContent = "7. SÄ±nÄ±f destek â€¢ konu anlat â€¢ test";
  } else if(state.tab==="tarih"){
    $modeBadge.textContent = "Mod: Tarih";
    $hintText.textContent = 'Ã–rn: â€œOsmanlÄ±nÄ±n 2. padiÅŸahÄ± kim?â€ â€¢ â€œÄ°stanbulâ€™u kim fethetti?â€';
    $subtitle.textContent = "Tarih â€¢ OsmanlÄ± â€¢ Cumhuriyet";
  } else if(state.tab==="ayar"){
    $modeBadge.textContent = "Mod: Ayar";
    $hintText.textContent = 'Ã–rn: â€œBenim adÄ±m ...â€ â€¢ â€œteÅŸekkÃ¼rlerâ€';
    $subtitle.textContent = "KiÅŸisel ayarlar â€¢ isim hatÄ±rlama";
    // ayar modunda kÃ¼Ã§Ã¼k mesaj
    addBotOnce("Ayarlar modu: Ä°smini kaydetmek iÃ§in â€œBenim adÄ±m ...â€ yazabilirsin.");
  }
}

let __botOnce = new Set();
function addBotOnce(key){
  if(__botOnce.has(key)) return;
  __botOnce.add(key);
  addMsg("bot", key);
}

/* ---------- GÃ¶nderme ---------- */
function send(){
  const text = $input.value.trim();
  if(!text) return;
  $input.value="";
  addMsg("user", text);

  showTyping();
  setTimeout(()=>{
    hideTyping();
    const ans = answerFor(text);
    addMsg("bot", ans);
  }, 450);
}

$sendBtn.addEventListener("click", send);
$input.addEventListener("keydown", (e)=>{
  if(e.key==="Enter" && !e.shiftKey){
    e.preventDefault();
    send();
  }
});

/* ---------- Quick chips ---------- */
quickPrompts.forEach(t=>{
  const c = document.createElement("div");
  c.className="chip";
  c.textContent=t;
  c.onclick=()=>{
    $input.value=t;
    $input.focus();
  };
  $quick.appendChild(c);
});

/* ---------- Ä°lk mesaj ---------- */
addMsg("bot",
`Selam! Ben ZenoAI ğŸ¤
Ä°stersen â€œBenim adÄ±m ...â€ yaz, adÄ±nÄ± hatÄ±rlayayÄ±m.
Sorunu direkt yaz: fen / matematik / tarih / tÃ¼rkÃ§e / din / ingilizce... elimden geldiÄŸince cevaplarÄ±m.

Ã–rnek:
- â€œ7. sÄ±nÄ±f konularâ€
- â€œKonu anlat: KarÄ±ÅŸÄ±mlarâ€
- â€œtest: elektrik devreleriâ€
- â€œ12 bÃ¶lÃ¼ 3â€`);
applyTab();
</script>
</body>
</html>
